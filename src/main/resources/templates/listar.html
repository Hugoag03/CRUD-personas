<!DOCTYPE html> <!-- Declaración del tipo de documento -->
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6"> <!-- Inicio de la etiqueta html con especificación del idioma y declaración de los espacios de nombres de Thymeleaf y Thymeleaf Spring Security -->
<head> <!-- Encabezado del documento -->
    <meta charset="UTF-8"> <!-- Especificación del conjunto de caracteres UTF-8 -->
    <title>Listado de personas</title> <!-- Título de la página -->
    <style type="text/css"> <!-- Estilos CSS para el diseño de la página -->
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Fuente principal */
            background-color: #f9f9f9; /* Color de fondo */
            margin: 0; /* Eliminar márgenes */
            padding: 0; /* Eliminar relleno */
            display: flex; /* Modelo de caja flexible para centrar contenido verticalmente */
            justify-content: center; /* Centrar horizontalmente */
            align-items: center; /* Centrar verticalmente */
            height: 100vh; /* Altura del cuerpo al 100% de la ventana */
        }
        .container {
            text-align: center; /* Alinear contenido al centro */
            width: 80%; /* Ancho del contenedor */
            margin: 0 auto; /* Centrar el contenedor */
            padding: 20px; /* Espaciado interno */
            background-color: #fff; /* Color de fondo del contenedor */
            border-radius: 10px; /* Borde redondeado */
            box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.1); /* Sombra suave */
        }
        h1 {
            color: #333; /* Color del texto */
            margin-bottom: 20px; /* Espaciado inferior */
        }
        table {
            width: 100%; /* Ancho de la tabla */
            margin: 0 auto 20px auto; /* Centrar la tabla y agregar espaciado inferior */
            border-collapse: collapse; /* Colapso de bordes */
        }
        th, td {
            border: 1px solid #ccc; /* Borde de las celdas */
            padding: 15px; /* Espaciado interno */
            width: 25%; /* Ajustar el ancho de las celdas */
        }
        th {
            background-color: #f2f2f2; /* Color de fondo del encabezado */
            font-weight: bold; /* Estilo de fuente en negrita */
        }
        .actions {
            text-align: center; /* Alinear contenido al centro */
            min-width: 200px; /* Establecer un ancho mínimo para las acciones */
        }
        .actions a {
            margin-right: 10px; /* Espaciado a la derecha */
            padding: 8px 16px; /* Espaciado interno */
            background-color: #007bff; /* Color de fondo del botón */
            color: #fff; /* Color del texto */
            text-decoration: none; /* Sin subrayado */
            border-radius: 5px; /* Borde redondeado */
            transition: background-color 0.3s; /* Transición de color de fondo */
        }
        .actions a:hover {
            background-color: #0056b3; /* Cambio de color de fondo al pasar el ratón */
        }
    </style>
</head>
<body> <!-- Cuerpo del documento -->
<div class="container"> <!-- Div centrado en la página -->
    <div sec:authorize="isAuthenticated()"> <!-- Div visible solo para usuarios autenticados -->
        Bienvenido <b><span sec:authentication="name">Username</span></b> <!-- Muestra el nombre de usuario autenticado -->
        &nbsp;
        <b><span sec:authentication="principal.authorities">Roles</span></b> <!-- Muestra los roles del usuario autenticado -->
    </div>
    <form th:action="@{/logout}" method="post"> <!-- Formulario para cerrar sesión -->
        <input type="submit" value="Salir" style="padding: 8px 16px; background-color: #dc3545; color: #fff; border: none; border-radius: 5px; cursor: pointer;"> <!-- Botón para cerrar sesión -->
    </form>
    <h1>Listado de personas</h1> <!-- Encabezado del listado de personas -->
    <table> <!-- Tabla que contiene los datos de las personas -->
        <tr> <!-- Fila de encabezado de la tabla -->
            <th>ID</th> <!-- Celda de encabezado para el ID -->
            <th>Nombre</th> <!-- Celda de encabezado para el nombre -->
            <th>Edad</th> <!-- Celda de encabezado para la edad -->
            <th sec:authorize="hasAnyAuthority('ADMIN', 'EDITOR')">Acciones</th> <!-- Celda de encabezado para las acciones, visible solo para usuarios con roles de administrador o editor -->
        </tr>
        <tr th:each="persona :${listaPersonas}"> <!-- Iteración sobre la lista de personas -->
            <td th:text="${persona.id}"></td> <!-- Celda con el ID de la persona -->
            <td th:text="${persona.nombre}"></td> <!-- Celda con el nombre de la persona -->
            <td th:text="${persona.edad}"></td> <!-- Celda con la edad de la persona -->
            <td class="actions" sec:authorize="hasAnyAuthority('ADMIN', 'EDITOR')"> <!-- Celda para las acciones, visible solo para usuarios con roles de administrador o editor -->
                <a th:href="@{/personas/editar/{id}(id=${persona.id})}" style="background-color: #28a745;">Editar</a> <!-- Enlace para editar la persona -->
                <a sec:authorize="hasAuthority('ADMIN')" th:href="@{/personas/eliminar/{id}(id=${persona.id})}" style="background-color: #dc3545;">Eliminar</a> <!-- Enlace para eliminar la persona, visible solo para usuarios con rol de administrador -->
            </td>
        </tr>
    </table>
    <div sec:authorize="hasAnyAuthority('ADMIN', 'CREATOR')"> <!-- Div visible solo para usuarios con roles de administrador o creador -->
        <a href="/personas/nueva" style="padding: 8px 16px; background-color: #007bff; color: #fff; text-decoration: none; border-radius: 5px; cursor: pointer;">Nueva persona</a> <!-- Enlace para agregar una nueva persona -->
    </div>
</div>
</body>
</html>
